Date.prototype.addDays=function(t){"use strict";this.setDate(this.getDate()+t)},Date.prototype.toYmd=function(t){"use strict";void 0===t&&(t="");var e=this.getFullYear(),a=function(){var t=this.getMonth();return t++,t.toString().length<2&&(t="0"+t.toString()),t.toString()}.bind(this)(),n=function(){var t=this.getDate();return t.toString().length<2&&(t="0"+t.toString()),t.toString()}.bind(this)(),i=e+t+a+t+n;return i},function(t,e,a){"use strict";t.Wprsrv=t.Wprsrv||{},t.Wprsrv.Calendars={endPicker:null,startPicker:null,disabledDates:[],getStartField:function(){return e.getElementById("datepicker-field-start")},getEndField:function(){return e.getElementById("datepicker-field-end")},getDayField:function(){return e.getElementById("datepicker-field")},getNextDisabledDay:function(t){console.log("Getting next disabled.");var e=this.disabledDates;if(!e)return!1;e.push(t.toYmd("-")),e.sort();var a=null,n=t.toYmd("-"),i=!1;return e.forEach(function(t){i===!0&&(a=t),t===n&&(i=!0)}),moment(a).toDate()},onStartChange:function(t){var e=t.startPicker.getDate(),a=t.endPicker.getDate();t.startPicker.setStartRange(e),t.endPicker.setStartRange(e),t.endPicker.setMinDate(e),t.endPicker.draw(),t.startPicker.draw(),e&&a&&(this.datesContainDisabled(e,a)?this.showValidationError(this.l10n.already_reserved):this.hideValidationError())},onEndChange:function(t){var e=t.startPicker.getDate(),a=t.endPicker.getDate();t.startPicker.setEndRange(a),t.startPicker.setMaxDate(a),t.endPicker.setEndRange(a),t.startPicker.draw(),t.endPicker.draw(),e&&a&&(this.datesContainDisabled(e,a)?this.showValidationError(this.l10n.already_reserved):this.hideValidationError())},datesContainDisabled:function(t,e){if(!this.disabledDates.length)return!1;for(;t.toYmd()<e.toYmd();){var a=t.toYmd("-");if(-1!==this.disabledDates.indexOf(a))return!0;t.addDays(1)}return!1},loadDisabledDaysData:function(){var e=t.reservableDisabledDays;return e!==a&&e.length?(e.forEach(function(t){for(var e=new Date(t.start+"T00:00:00"),a=new Date(t.end+"T23:59:59");e.toYmd()<=a.toYmd();)this.disabledDates.push(e.toYmd("-")),e.setDate(e.getDate()+1)}.bind(this)),this.disabledDates):[]},getPikadayConfig:function(t,e){var a=t.l10n.pikaday||{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},n="YYYY-MM-DD",i=new Date,r=[parseInt(i.getFullYear()),parseInt(i.getFullYear()+2)],s=function(e){var a=e.toYmd("-"),n=!1;return t.disabledDates.forEach(function(t){t===a&&(n=!0)}),n},d=moment().hour(0).minute(0).second(0).milliseconds(0).toDate();return{firstDay:1,i18n:a,format:n,yearRange:r,disableDayFn:s,minDate:d,container:e,bound:!1}},spawnCalendarContainer:function(t,n){var i=e.createElement("div");if(i.id=t.id+"-calcont",i.className="pikaday-container",t.parentNode.insertBefore(i,t.nextSibling),n!==a){var r=n.toString(),s=e.createElement("strong");s.className="pikaday-heading",s.innerHTML=r,t.parentNode.insertBefore(s,i)}return i},spawnSinglePicker:function(t){var e=this.spawnCalendarContainer(t),a=this.getPikadayConfig(this,e);return a.field=t,new Pikaday(a)},spawnStartPicker:function(t){var e=this.l10n.date_form||"From ...",a=this.spawnCalendarContainer(t,e),n=this.getPikadayConfig(this,a);n.field=t;var i=new Pikaday(n);return i.config({onSelect:function(){this.onStartChange(this)}.bind(this)}),i},spawnEndPicker:function(t){var e=this.l10n.date_to||"To ...",a=this.spawnCalendarContainer(t,e),n=this.getPikadayConfig(this,a);n.field=t;var i=new Pikaday(n);return i.config({onSelect:function(){this.onEndChange(this)}.bind(this)}),i},showValidationError:function(e,n){n===a&&(n=!1),this.calendarValidationMessage.innerHTML=e,this.calendarValidationMessage.className="validation is-active",n&&t.setTimeout(function(){this.hideValidationError()},5e3)},hideValidationError:function(){this.calendarValidationMessage.innerHTML="",this.calendarValidationMessage.className="validation"},init:function(t){console.log("Initializing calendars."),this.loadLocalization(),this.loadDisabledDaysData();var e=this.getStartField()||this.getDayField(),a=this.getEndField();return e?(a?(this.startPicker=this.spawnStartPicker(e),this.endPicker=this.spawnEndPicker(a)):this.startPicker=this.spawnSinglePicker(e),void(this.calendarValidationMessage=e.parentNode.querySelector(".validation"))):void console.error("No calendars in sight!")},loadLocalization:function(){this.l10n=t.WprsrvL10n.Calendars.l10n}},e.addEventListener("DOMContentLoaded",function(e){t.Wprsrv.Calendars.init(e)})}(window,document);