Date.prototype.addDays=function(t){"use strict";this.setDate(this.getDate()+t)},Date.prototype.toYmd=function(t){"use strict";void 0===t&&(t="");var e=this.getFullYear(),a=function(){var t=this.getMonth();return t++,t.toString().length<2&&(t="0"+t.toString()),t.toString()}.bind(this)(),i=function(){var t=this.getDate();return t.toString().length<2&&(t="0"+t.toString()),t.toString()}.bind(this)(),n=e+t+a+t+i;return n},function(t,e,a){"use strict";t.Wprsrv=t.Wprsrv||{},t.Wprsrv.Calendars={endPicker:null,startPicker:null,disabledDates:[],getStartField:function(){return e.getElementById("datepicker-field-start")},getEndField:function(){return e.getElementById("datepicker-field-end")},getDayField:function(){return e.getElementById("datepicker-field")},getNextDisabledDay:function(t){console.log("Getting next disabled.");var e=this.disabledDates;if(!e)return!1;e.push(t.toYmd("-")),e.sort();var a=null,i=t.toYmd("-"),n=!1;return e.forEach(function(t){n===!0&&(a=t),t==i&&(n=!0)}),moment(a).toDate()},onStartChange:function(t){var e=t.startPicker.getDate(),a=t.endPicker.getDate();t.startPicker.setStartRange(e),t.endPicker.setStartRange(e),t.endPicker.setMinDate(e),e&&a&&(this.datesContainDisabled(e,a)?this.showValidationError(this.l10n.already_reserved):this.hideValidationError())},onEndChange:function(t){var e=t.startPicker.getDate(),a=t.endPicker.getDate();t.startPicker.setEndRange(a),t.startPicker.setMaxDate(a),t.endPicker.setEndRange(a),e&&a&&(this.datesContainDisabled(e,a)?this.showValidationError(this.l10n.already_reserved):this.hideValidationError())},datesContainDisabled:function(t,e){if(!this.disabledDates.length)return!1;for(;t.toYmd()<e.toYmd();){var a=t.toYmd("-");if(-1!==this.disabledDates.indexOf(a))return!0;t.addDays(1)}return!1},loadDisabledDaysData:function(){if(t.reservableDisabledDays!==a&&t.reservableDisabledDays.length){var e=t.reservableDisabledDays;return e.forEach(function(t){for(var e=new Date(t.start+"T00:00:00"),a=new Date(t.end+"T23:59:59");e.toYmd()<=a.toYmd();)this.disabledDates.push(e.toYmd("-")),e.setDate(e.getDate()+1)}.bind(this)),this.disabledDates}return[]},getPikadayConfig:function(t){var e=t.l10n.pikaday||{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},a="YYYY-MM-DD",i=new Date,n=[parseInt(i.getFullYear()),parseInt(i.getFullYear()+2)],r=function(e){var a=e.toYmd("-"),i=!1;return t.disabledDates.forEach(function(t){t==a&&(i=!0)}),i};return{firstDay:1,i18n:e,format:a,yearRange:n,disableDayFn:r,minDate:moment().hour(0).minute(0).second(0).milliseconds(0).toDate()}},spawnSinglePicker:function(t){var e=this.getPikadayConfig(this);return e.field=t,new Pikaday(e)},spawnStartPicker:function(t){var e=this.getPikadayConfig(this);e.field=t;var a=new Pikaday(e);return a.config({onSelect:function(){this.onStartChange(this)}.bind(this)}),a},spawnEndPicker:function(t){var e=this.getPikadayConfig(this);e.field=t;var a=new Pikaday(e);return a.config({onSelect:function(){this.onEndChange(this)}.bind(this)}),a},showValidationError:function(e,i){i===a&&(i=!1),this.calendarValidationMessage.innerHTML=e,this.calendarValidationMessage.className="validation is-active",i&&t.setTimeout(function(){this.hideValidationError()},5e3)},hideValidationError:function(){this.calendarValidationMessage.innerHTML="",this.calendarValidationMessage.className="validation"},init:function(t){console.log("Initializing calendars."),this.loadLocalization(),this.loadDisabledDaysData();var e=this.getStartField()||this.getDayField(),a=this.getEndField();return e?(a?(this.startPicker=this.spawnStartPicker(e),this.endPicker=this.spawnEndPicker(a)):this.startPicker=this.spawnSinglePicker(e),void(this.calendarValidationMessage=e.parentNode.querySelector(".validation"))):void console.error("No calendars in sight!")},loadLocalization:function(){this.l10n=t.WprsrvL10n.Calendars.l10n}},e.addEventListener("DOMContentLoaded",function(e){t.Wprsrv.Calendars.init(e)})}(window,document);